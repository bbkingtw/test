/* NoFlo 0.4.0 - Flow-Based Programming environment. See http://noflojs.org for more information. */function require(t,n,e){var r=require.resolve(t);if(null==r){e=e||t,n=n||"root";var o=Error('Failed to require "'+e+'" from "'+n+'"');throw o.path=e,o.parent=n,o.require=!0,o}var i=require.modules[r];return i.exports||(i.exports={},i.client=i.component=!0,i.call(this,i.exports,require.relative(r),i)),i.exports}require.modules={},require.aliases={},require.resolve=function(t){"/"===t.charAt(0)&&(t=t.slice(1));for(var n=t+"/index.js",e=[t,t+".js",t+".json",t+"/index.js",t+"/index.json"],r=0;e.length>r;r++){var t=e[r];if(require.modules.hasOwnProperty(t))return t}return require.aliases.hasOwnProperty(n)?require.aliases[n]:void 0},require.normalize=function(t,n){var e=[];if("."!=n.charAt(0))return n;t=t.split("/"),n=n.split("/");for(var r=0;n.length>r;++r)".."==n[r]?t.pop():"."!=n[r]&&""!=n[r]&&e.push(n[r]);return t.concat(e).join("/")},require.register=function(t,n){require.modules[t]=n},require.alias=function(t,n){if(!require.modules.hasOwnProperty(t))throw Error('Failed to alias "'+t+'", it does not exist');require.aliases[n]=t},require.relative=function(t){function n(t,n){for(var e=t.length;e--;)if(t[e]===n)return e;return-1}function e(n){var r=e.resolve(n);return require(r,t,n)}var r=require.normalize(t,"..");return e.resolve=function(e){var o=e.charAt(0);if("/"==o)return e.slice(1);if("."==o)return require.normalize(r,e);var i=t.split("/"),s=n(i,"deps")+1;return s||(s=0),e=i.slice(0,s+1).join("/")+"/deps/"+e},e.exists=function(t){return require.modules.hasOwnProperty(e.resolve(t))},e},require.register("component-indexof/index.js",function(t,n,e){var r=[].indexOf;e.exports=function(t,n){if(r)return t.indexOf(n);for(var e=0;t.length>e;++e)if(t[e]===n)return e;return-1}}),require.register("component-emitter/index.js",function(t,n,e){function r(t){return t?o(t):void 0}function o(t){for(var n in r.prototype)t[n]=r.prototype[n];return t}var i=n("indexof");e.exports=r,r.prototype.on=function(t,n){return this._callbacks=this._callbacks||{},(this._callbacks[t]=this._callbacks[t]||[]).push(n),this},r.prototype.once=function(t,n){function e(){r.off(t,e),n.apply(this,arguments)}var r=this;return this._callbacks=this._callbacks||{},n._off=e,this.on(t,e),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=function(t,n){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var e=this._callbacks[t];if(!e)return this;if(1==arguments.length)return delete this._callbacks[t],this;var r=i(e,n._off||n);return~r&&e.splice(r,1),this},r.prototype.emit=function(t){this._callbacks=this._callbacks||{};var n=[].slice.call(arguments,1),e=this._callbacks[t];if(e){e=e.slice(0);for(var r=0,o=e.length;o>r;++r)e[r].apply(this,n)}return this},r.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks[t]||[]},r.prototype.hasListeners=function(t){return!!this.listeners(t).length}}),require.register("component-underscore/index.js",function(t,n,e){(function(){var n=this,r=n._,o={},i=Array.prototype,s=Object.prototype,u=Function.prototype,c=i.push,a=i.slice,l=i.unshift,p=s.toString,f=s.hasOwnProperty,h=i.forEach,d=i.map,m=i.reduce,g=i.reduceRight,v=i.filter,y=i.every,b=i.some,k=i.indexOf,x=i.lastIndexOf,P=Array.isArray,w=Object.keys,A=u.bind,E=function(t){return new M(t)};t!==void 0?(e!==void 0&&e.exports&&(t=e.exports=E),t._=E):n._=E,E.VERSION="1.3.3";var N=E.each=E.forEach=function(t,n,e){if(null!=t)if(h&&t.forEach===h)t.forEach(n,e);else if(t.length===+t.length){for(var r=0,i=t.length;i>r;r++)if(n.call(e,t[r],r,t)===o)return}else for(var s in t)if(E.has(t,s)&&n.call(e,t[s],s,t)===o)return};E.map=E.collect=function(t,n,e){var r=[];return null==t?r:d&&t.map===d?t.map(n,e):(N(t,function(t,o,i){r[r.length]=n.call(e,t,o,i)}),r)},E.reduce=E.foldl=E.inject=function(t,n,e,r){var o=arguments.length>2;if(null==t&&(t=[]),m&&t.reduce===m)return r&&(n=E.bind(n,r)),o?t.reduce(n,e):t.reduce(n);if(N(t,function(t,i,s){o?e=n.call(r,e,t,i,s):(e=t,o=!0)}),!o)throw new TypeError("Reduce of empty array with no initial value");return e},E.reduceRight=E.foldr=function(t,n,e,r){var o=arguments.length>2;if(null==t&&(t=[]),g&&t.reduceRight===g)return r&&(n=E.bind(n,r)),o?t.reduceRight(n,e):t.reduceRight(n);var i=E.toArray(t).reverse();return r&&!o&&(n=E.bind(n,r)),o?E.reduce(i,n,e,r):E.reduce(i,n)},E.find=E.detect=function(t,n,e){var r;return _(t,function(t,o,i){return n.call(e,t,o,i)?(r=t,!0):void 0}),r},E.filter=E.select=function(t,n,e){var r=[];return null==t?r:v&&t.filter===v?t.filter(n,e):(N(t,function(t,o,i){n.call(e,t,o,i)&&(r[r.length]=t)}),r)},E.reject=function(t,n,e){var r=[];return null==t?r:(N(t,function(t,o,i){n.call(e,t,o,i)||(r[r.length]=t)}),r)},E.every=E.all=function(t,n,e){var r=!0;return null==t?r:y&&t.every===y?t.every(n,e):(N(t,function(t,i,s){return(r=r&&n.call(e,t,i,s))?void 0:o}),!!r)};var _=E.some=E.any=function(t,n,e){n||(n=E.identity);var r=!1;return null==t?r:b&&t.some===b?t.some(n,e):(N(t,function(t,i,s){return r||(r=n.call(e,t,i,s))?o:void 0}),!!r)};E.include=E.contains=function(t,n){var e=!1;return null==t?e:k&&t.indexOf===k?-1!=t.indexOf(n):e=_(t,function(t){return t===n})},E.invoke=function(t,n){var e=a.call(arguments,2);return E.map(t,function(t){return(E.isFunction(n)?n:t[n]).apply(t,e)})},E.pluck=function(t,n){return E.map(t,function(t){return t[n]})},E.max=function(t,n,e){if(!n&&E.isArray(t)&&t[0]===+t[0]&&65535>t.length)return Math.max.apply(Math,t);if(!n&&E.isEmpty(t))return-1/0;var r={computed:-1/0};return N(t,function(t,o,i){var s=n?n.call(e,t,o,i):t;s>=r.computed&&(r={value:t,computed:s})}),r.value},E.min=function(t,n,e){if(!n&&E.isArray(t)&&t[0]===+t[0]&&65535>t.length)return Math.min.apply(Math,t);if(!n&&E.isEmpty(t))return 1/0;var r={computed:1/0};return N(t,function(t,o,i){var s=n?n.call(e,t,o,i):t;r.computed>s&&(r={value:t,computed:s})}),r.value},E.shuffle=function(t){var n,e=0,r=[];return N(t,function(t){n=Math.floor(Math.random()*++e),r[e-1]=r[n],r[n]=t}),r},E.sortBy=function(t,n,e){var r=j(t,n);return E.pluck(E.map(t,function(t,n,o){return{value:t,criteria:r.call(e,t,n,o)}}).sort(function(t,n){var e=t.criteria,r=n.criteria;return void 0===e?1:void 0===r?-1:r>e?-1:e>r?1:0}),"value")};var j=function(t,n){return E.isFunction(n)?n:function(t){return t[n]}},C=function(t,n,e){var r={},o=j(t,n);return N(t,function(t,n){var i=o(t,n);e(r,i,t)}),r};E.groupBy=function(t,n){return C(t,n,function(t,n,e){(t[n]||(t[n]=[])).push(e)})},E.countBy=function(t,n){return C(t,n,function(t,n){t[n]||(t[n]=0),t[n]++})},E.sortedIndex=function(t,n,e){e||(e=E.identity);for(var r=e(n),o=0,i=t.length;i>o;){var s=o+i>>1;r>e(t[s])?o=s+1:i=s}return o},E.toArray=function(t){return t?E.isArray(t)?a.call(t):E.isArguments(t)?a.call(t):t.toArray&&E.isFunction(t.toArray)?t.toArray():E.values(t):[]},E.size=function(t){return E.isArray(t)?t.length:E.keys(t).length},E.first=E.head=E.take=function(t,n,e){return null==n||e?t[0]:a.call(t,0,n)},E.initial=function(t,n,e){return a.call(t,0,t.length-(null==n||e?1:n))},E.last=function(t,n,e){return null==n||e?t[t.length-1]:a.call(t,Math.max(t.length-n,0))},E.rest=E.tail=function(t,n,e){return a.call(t,null==n||e?1:n)},E.compact=function(t){return E.filter(t,function(t){return!!t})};var O=function(t,n,e){return N(t,function(t){E.isArray(t)?n?c.apply(e,t):O(t,n,e):e.push(t)}),e};E.flatten=function(t,n){return O(t,n,[])},E.without=function(t){return E.difference(t,a.call(arguments,1))},E.uniq=E.unique=function(t,n,e){var r=e?E.map(t,e):t,o=[];return E.reduce(r,function(e,r,i){return(n?E.last(e)===r&&e.length:E.include(e,r))||(e.push(r),o.push(t[i])),e},[]),o},E.union=function(){return E.uniq(O(arguments,!0,[]))},E.intersection=function(t){var n=a.call(arguments,1);return E.filter(E.uniq(t),function(t){return E.every(n,function(n){return E.indexOf(n,t)>=0})})},E.difference=function(t){var n=O(a.call(arguments,1),!0,[]);return E.filter(t,function(t){return!E.include(n,t)})},E.zip=function(){for(var t=a.call(arguments),n=E.max(E.pluck(t,"length")),e=Array(n),r=0;n>r;r++)e[r]=E.pluck(t,""+r);return e},E.zipObject=function(t,n){for(var e={},r=0,o=t.length;o>r;r++)e[t[r]]=n[r];return e},E.indexOf=function(t,n,e){if(null==t)return-1;var r,o;if(e)return r=E.sortedIndex(t,n),t[r]===n?r:-1;if(k&&t.indexOf===k)return t.indexOf(n);for(r=0,o=t.length;o>r;r++)if(t[r]===n)return r;return-1},E.lastIndexOf=function(t,n){if(null==t)return-1;if(x&&t.lastIndexOf===x)return t.lastIndexOf(n);for(var e=t.length;e--;)if(t[e]===n)return e;return-1},E.range=function(t,n,e){1>=arguments.length&&(n=t||0,t=0),e=arguments[2]||1;for(var r=Math.max(Math.ceil((n-t)/e),0),o=0,i=Array(r);r>o;)i[o++]=t,t+=e;return i};var q=function(){};E.bind=function(t,n){var e,r;if(t.bind===A&&A)return A.apply(t,a.call(arguments,1));if(!E.isFunction(t))throw new TypeError;return r=a.call(arguments,2),e=function(){if(!(this instanceof e))return t.apply(n,r.concat(a.call(arguments)));q.prototype=t.prototype;var o=new q,i=t.apply(o,r.concat(a.call(arguments)));return Object(i)===i?i:o}},E.bindAll=function(t){var n=a.call(arguments,1);return 0==n.length&&(n=E.functions(t)),N(n,function(n){t[n]=E.bind(t[n],t)}),t},E.memoize=function(t,n){var e={};return n||(n=E.identity),function(){var r=n.apply(this,arguments);return E.has(e,r)?e[r]:e[r]=t.apply(this,arguments)}},E.delay=function(t,n){var e=a.call(arguments,2);return setTimeout(function(){return t.apply(null,e)},n)},E.defer=function(t){return E.delay.apply(E,[t,1].concat(a.call(arguments,1)))},E.throttle=function(t,n){var e,r,o,i,s,u,c=E.debounce(function(){s=i=!1},n);return function(){e=this,r=arguments;var a=function(){o=null,s&&t.apply(e,r),c()};return o||(o=setTimeout(a,n)),i?s=!0:(i=!0,u=t.apply(e,r)),c(),u}},E.debounce=function(t,n,e){var r;return function(){var o=this,i=arguments,s=function(){r=null,e||t.apply(o,i)},u=e&&!r;clearTimeout(r),r=setTimeout(s,n),u&&t.apply(o,i)}},E.once=function(t){var n,e=!1;return function(){return e?n:(e=!0,n=t.apply(this,arguments))}},E.wrap=function(t,n){return function(){var e=[t].concat(a.call(arguments,0));return n.apply(this,e)}},E.compose=function(){var t=arguments;return function(){for(var n=arguments,e=t.length-1;e>=0;e--)n=[t[e].apply(this,n)];return n[0]}},E.after=function(t,n){return 0>=t?n():function(){return 1>--t?n.apply(this,arguments):void 0}},E.keys=w||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var n=[];for(var e in t)E.has(t,e)&&(n[n.length]=e);return n},E.values=function(t){return E.map(t,E.identity)},E.functions=E.methods=function(t){var n=[];for(var e in t)E.isFunction(t[e])&&n.push(e);return n.sort()},E.extend=function(t){return N(a.call(arguments,1),function(n){for(var e in n)t[e]=n[e]}),t},E.pick=function(t){var n={};return N(O(a.call(arguments,1),!0,[]),function(e){e in t&&(n[e]=t[e])}),n},E.defaults=function(t){return N(a.call(arguments,1),function(n){for(var e in n)null==t[e]&&(t[e]=n[e])}),t},E.clone=function(t){return E.isObject(t)?E.isArray(t)?t.slice():E.extend({},t):t},E.tap=function(t,n){return n(t),t};var S=function(t,n,e){if(t===n)return 0!==t||1/t==1/n;if(null==t||null==n)return t===n;if(t._chain&&(t=t._wrapped),n._chain&&(n=n._wrapped),t.isEqual&&E.isFunction(t.isEqual))return t.isEqual(n);if(n.isEqual&&E.isFunction(n.isEqual))return n.isEqual(t);var r=p.call(t);if(r!=p.call(n))return!1;switch(r){case"[object String]":return t==n+"";case"[object Number]":return t!=+t?n!=+n:0==t?1/t==1/n:t==+n;case"[object Date]":case"[object Boolean]":return+t==+n;case"[object RegExp]":return t.source==n.source&&t.global==n.global&&t.multiline==n.multiline&&t.ignoreCase==n.ignoreCase}if("object"!=typeof t||"object"!=typeof n)return!1;for(var o=e.length;o--;)if(e[o]==t)return!0;e.push(t);var i=0,s=!0;if("[object Array]"==r){if(i=t.length,s=i==n.length)for(;i--&&(s=i in t==i in n&&S(t[i],n[i],e)););}else{if("constructor"in t!="constructor"in n||t.constructor!=n.constructor)return!1;for(var u in t)if(E.has(t,u)&&(i++,!(s=E.has(n,u)&&S(t[u],n[u],e))))break;if(s){for(u in n)if(E.has(n,u)&&!i--)break;s=!i}}return e.pop(),s};E.isEqual=function(t,n){return S(t,n,[])},E.isEmpty=function(t){if(null==t)return!0;if(E.isArray(t)||E.isString(t))return 0===t.length;for(var n in t)if(E.has(t,n))return!1;return!0},E.isElement=function(t){return!(!t||1!=t.nodeType)},E.isArray=P||function(t){return"[object Array]"==p.call(t)},E.isObject=function(t){return t===Object(t)},N(["Arguments","Function","String","Number","Date","RegExp"],function(t){E["is"+t]=function(n){return p.call(n)=="[object "+t+"]"}}),E.isArguments(arguments)||(E.isArguments=function(t){return!(!t||!E.has(t,"callee"))}),E.isFinite=function(t){return E.isNumber(t)&&isFinite(t)},E.isNaN=function(t){return t!==t},E.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==p.call(t)},E.isNull=function(t){return null===t},E.isUndefined=function(t){return void 0===t},E.has=function(t,n){return f.call(t,n)},E.noConflict=function(){return n._=r,this},E.identity=function(t){return t},E.times=function(t,n,e){for(var r=0;t>r;r++)n.call(e,r)};var I={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"},L=/[&<>"'\/]/g;E.escape=function(t){return(""+t).replace(L,function(t){return I[t]})},E.result=function(t,n){if(null==t)return null;var e=t[n];return E.isFunction(e)?e.call(t):e},E.mixin=function(t){N(E.functions(t),function(n){J(n,E[n]=t[n])})};var G=0;E.uniqueId=function(t){var n=G++;return t?t+n:n},E.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var F=/.^/,D={"\\":"\\","'":"'",r:"\r",n:"\n",t:"	",u2028:"\u2028",u2029:"\u2029"};for(var z in D)D[D[z]]=z;var T=/\\|'|\r|\n|\t|\u2028|\u2029/g,R=/\\(\\|'|r|n|t|u2028|u2029)/g,Z=function(t){return t.replace(R,function(t,n){return D[n]})};E.template=function(t,n,e){e=E.defaults(e||{},E.templateSettings);var r="__p+='"+t.replace(T,function(t){return"\\"+D[t]}).replace(e.escape||F,function(t,n){return"'+\n((__t=("+Z(n)+"))==null?'':_.escape(__t))+\n'"}).replace(e.interpolate||F,function(t,n){return"'+\n((__t=("+Z(n)+"))==null?'':__t)+\n'"}).replace(e.evaluate||F,function(t,n){return"';\n"+Z(n)+"\n__p+='"})+"';\n";e.variable||(r="with(obj||{}){\n"+r+"}\n"),r="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'')};\n"+r+"return __p;\n";var o=Function(e.variable||"obj","_",r);if(n)return o(n,E);var i=function(t){return o.call(this,t,E)};return i.source="function("+(e.variable||"obj")+"){\n"+r+"}",i},E.chain=function(t){return E(t).chain()};var M=function(t){this._wrapped=t};E.prototype=M.prototype;var B=function(t,n){return n?E(t).chain():t},J=function(t,n){M.prototype[t]=function(){var t=a.call(arguments);return l.call(t,this._wrapped),B(n.apply(E,t),this._chain)}};E.mixin(E),N(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var n=i[t];M.prototype[t]=function(){var e=this._wrapped;return n.apply(e,arguments),"shift"!=t&&"splice"!=t||0!==e.length||delete e[0],B(e,this._chain)}}),N(["concat","join","slice"],function(t){var n=i[t];M.prototype[t]=function(){return B(n.apply(this._wrapped,arguments),this._chain)}}),M.prototype.chain=function(){return this._chain=!0,this},M.prototype.value=function(){return this._wrapped}}).call(this)}),require.register("noflo-fbp/lib/fbp.js",function(t,n,e){e.exports=function(){function t(t){return'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}var n={parse:function(n,e){function r(t){j>N||(N>j&&(j=N,C=[]),C.push(t))}function o(){var t,n,e;for(e=N,t=[],n=i();null!==n;)t.push(n),n=i();return null!==t&&(t=function(){return w.getResult()}(e)),null===t&&(N=e),t}function i(){var t,e,o,i,a,l,p,f,h;if(f=N,h=N,t=y(),null!==t)if("EXPORT="===n.substr(N,7)?(e="EXPORT=",N+=7):(e=null,0===_&&r('"EXPORT="')),null!==e){if(/^[A-Z.]/.test(n.charAt(N))?(i=n.charAt(N),N++):(i=null,0===_&&r("[A-Z.]")),null!==i)for(o=[];null!==i;)o.push(i),/^[A-Z.]/.test(n.charAt(N))?(i=n.charAt(N),N++):(i=null,0===_&&r("[A-Z.]"));else o=null;if(null!==o)if(58===n.charCodeAt(N)?(i=":",N++):(i=null,0===_&&r('":"')),null!==i){if(/^[A-Z]/.test(n.charAt(N))?(l=n.charAt(N),N++):(l=null,0===_&&r("[A-Z]")),null!==l)for(a=[];null!==l;)a.push(l),/^[A-Z]/.test(n.charAt(N))?(l=n.charAt(N),N++):(l=null,0===_&&r("[A-Z]"));else a=null;null!==a?(l=y(),null!==l?(p=s(),p=null!==p?p:"",null!==p?t=[t,e,o,i,a,l,p]:(t=null,N=h)):(t=null,N=h)):(t=null,N=h)}else t=null,N=h;else t=null,N=h}else t=null,N=h;else t=null,N=h;return null!==t&&(t=function(t,n,e){return w.registerExports(n.join(""),e.join(""))}(f,t[2],t[4])),null===t&&(N=f),null===t&&(f=N,t=u(),null!==t?(/^[\n\r\u2028\u2029]/.test(n.charAt(N))?(e=n.charAt(N),N++):(e=null,0===_&&r("[\\n\\r\\u2028\\u2029]")),e=null!==e?e:"",null!==e?t=[t,e]:(t=null,N=f)):(t=null,N=f),null===t&&(f=N,t=y(),null!==t?(/^[\n\r\u2028\u2029]/.test(n.charAt(N))?(e=n.charAt(N),N++):(e=null,0===_&&r("[\\n\\r\\u2028\\u2029]")),null!==e?t=[t,e]:(t=null,N=f)):(t=null,N=f),null===t&&(f=N,h=N,t=y(),null!==t?(e=c(),null!==e?(o=y(),null!==o?(i=s(),i=null!==i?i:"",null!==i?t=[t,e,o,i]:(t=null,N=h)):(t=null,N=h)):(t=null,N=h)):(t=null,N=h),null!==t&&(t=function(t,n){return w.registerEdges(n)}(f,t[1])),null===t&&(N=f)))),t}function s(){var t,e,o,i,s;return s=N,t=y(),null!==t?(44===n.charCodeAt(N)?(e=",",N++):(e=null,0===_&&r('","')),e=null!==e?e:"",null!==e?(o=u(),o=null!==o?o:"",null!==o?(/^[\n\r\u2028\u2029]/.test(n.charAt(N))?(i=n.charAt(N),N++):(i=null,0===_&&r("[\\n\\r\\u2028\\u2029]")),i=null!==i?i:"",null!==i?t=[t,e,o,i]:(t=null,N=s)):(t=null,N=s)):(t=null,N=s)):(t=null,N=s),t}function u(){var t,e,o,i,s;if(s=N,t=y(),null!==t)if(35===n.charCodeAt(N)?(e="#",N++):(e=null,0===_&&r('"#"')),null!==e){for(o=[],i=v();null!==i;)o.push(i),i=v();null!==o?t=[t,e,o]:(t=null,N=s)}else t=null,N=s;else t=null,N=s;return t}function c(){var t,e,o,i,s,u,l;return u=N,l=N,t=a(),null!==t?(e=y(),null!==e?("->"===n.substr(N,2)?(o="->",N+=2):(o=null,0===_&&r('"->"')),null!==o?(i=y(),null!==i?(s=c(),null!==s?t=[t,e,o,i,s]:(t=null,N=l)):(t=null,N=l)):(t=null,N=l)):(t=null,N=l)):(t=null,N=l),null!==t&&(t=function(t,n,e){return[n,e]}(u,t[0],t[4])),null===t&&(N=u),null===t&&(t=a()),t}function a(){var t,n,e,r,o,i,s;return i=N,s=N,t=g(),null!==t?(n=y(),null!==n?(e=h(),null!==e?(r=y(),null!==r?(o=g(),null!==o?t=[t,n,e,r,o]:(t=null,N=s)):(t=null,N=s)):(t=null,N=s)):(t=null,N=s)):(t=null,N=s),null!==t&&(t=function(t,n,e,r){return[{tgt:{process:e,port:n}},{src:{process:e,port:r}}]}(i,t[0],t[2],t[4])),null===t&&(N=i),null===t&&(t=p(),null===t&&(t=f(),null===t&&(t=l()))),t}function l(){var t,n,e,r,o;return r=N,o=N,t=h(),null!==t?(n=y(),null!==n?(e=g(),null!==e?t=[t,n,e]:(t=null,N=o)):(t=null,N=o)):(t=null,N=o),null!==t&&(t=function(t,n,e){return{src:{process:n,port:e}}}(r,t[0],t[2])),null===t&&(N=r),t}function p(){var t,e,o,i,s;if(i=N,s=N,39===n.charCodeAt(N)?(t="'",N++):(t=null,0===_&&r('"\'"')),null!==t){for(e=[],o=v();null!==o;)e.push(o),o=v();null!==e?(39===n.charCodeAt(N)?(o="'",N++):(o=null,0===_&&r('"\'"')),null!==o?t=[t,e,o]:(t=null,N=s)):(t=null,N=s)}else t=null,N=s;return null!==t&&(t=function(t,n){return{data:n.join("")}}(i,t[1])),null===t&&(N=i),t}function f(){var t,n,e,r,o;return r=N,o=N,t=g(),null!==t?(n=y(),null!==n?(e=h(),null!==e?t=[t,n,e]:(t=null,N=o)):(t=null,N=o)):(t=null,N=o),null!==t&&(t=function(t,n,e){return{tgt:{process:e,port:n}}}(r,t[0],t[2])),null===t&&(N=r),t}function h(){var t,e,o,i;if(o=N,i=N,/^[a-zA-Z]/.test(n.charAt(N))?(e=n.charAt(N),N++):(e=null,0===_&&r("[a-zA-Z]")),null!==e)for(t=[];null!==e;)t.push(e),/^[a-zA-Z]/.test(n.charAt(N))?(e=n.charAt(N),N++):(e=null,0===_&&r("[a-zA-Z]"));else t=null;return null!==t?(e=d(),e=null!==e?e:"",null!==e?t=[t,e]:(t=null,N=i)):(t=null,N=i),null!==t&&(t=function(t,n,e){return e&&w.addNode(n.join(""),e),n.join("")}(o,t[0],t[1])),null===t&&(N=o),t}function d(){var t,e,o,i,s,u;if(s=N,u=N,40===n.charCodeAt(N)?(t="(",N++):(t=null,0===_&&r('"("')),null!==t){if(/^[a-zA-Z\/]/.test(n.charAt(N))?(o=n.charAt(N),N++):(o=null,0===_&&r("[a-zA-Z\\/]")),null!==o)for(e=[];null!==o;)e.push(o),/^[a-zA-Z\/]/.test(n.charAt(N))?(o=n.charAt(N),N++):(o=null,0===_&&r("[a-zA-Z\\/]"));else e=null;e=null!==e?e:"",null!==e?(o=m(),o=null!==o?o:"",null!==o?(41===n.charCodeAt(N)?(i=")",N++):(i=null,0===_&&r('")"')),null!==i?t=[t,e,o,i]:(t=null,N=u)):(t=null,N=u)):(t=null,N=u)}else t=null,N=u;return null!==t&&(t=function(t,n,e){var r={};return r.comp=n?n.join(""):"",e?r.meta=e.join("").split(","):null,r}(s,t[1],t[2])),null===t&&(N=s),t}function m(){var t,e,o,i,s;if(i=N,s=N,58===n.charCodeAt(N)?(t=":",N++):(t=null,0===_&&r('":"')),null!==t){if(/^[a-zA-Z\/]/.test(n.charAt(N))?(o=n.charAt(N),N++):(o=null,0===_&&r("[a-zA-Z\\/]")),null!==o)for(e=[];null!==o;)e.push(o),/^[a-zA-Z\/]/.test(n.charAt(N))?(o=n.charAt(N),N++):(o=null,0===_&&r("[a-zA-Z\\/]"));else e=null;null!==e?t=[t,e]:(t=null,N=s)}else t=null,N=s;return null!==t&&(t=function(t,n){return n}(i,t[1])),null===t&&(N=i),t}function g(){var t,e,o,i;if(o=N,i=N,/^[A-Z.0-9]/.test(n.charAt(N))?(e=n.charAt(N),N++):(e=null,0===_&&r("[A-Z.0-9]")),null!==e)for(t=[];null!==e;)t.push(e),/^[A-Z.0-9]/.test(n.charAt(N))?(e=n.charAt(N),N++):(e=null,0===_&&r("[A-Z.0-9]"));else t=null;return null!==t?(e=b(),null!==e?t=[t,e]:(t=null,N=i)):(t=null,N=i),null!==t&&(t=function(t,n){return n.join("").toLowerCase()}(o,t[0])),null===t&&(N=o),t}function v(){var t;return/^[a-zA-Z0-9 .,:@+?!^=()_\-$*\/\\]/.test(n.charAt(N))?(t=n.charAt(N),N++):(t=null,0===_&&r("[a-zA-Z0-9 .,:@+?!^=()_\\-$*\\/\\\\]")),t}function y(){var t,e;for(t=[],32===n.charCodeAt(N)?(e=" ",N++):(e=null,0===_&&r('" "'));null!==e;)t.push(e),32===n.charCodeAt(N)?(e=" ",N++):(e=null,0===_&&r('" "'));return t=null!==t?t:""}function b(){var t,e;if(32===n.charCodeAt(N)?(e=" ",N++):(e=null,0===_&&r('" "')),null!==e)for(t=[];null!==e;)t.push(e),32===n.charCodeAt(N)?(e=" ",N++):(e=null,0===_&&r('" "'));else t=null;return t}function k(t){t.sort();for(var n=null,e=[],r=0;t.length>r;r++)t[r]!==n&&(e.push(t[r]),n=t[r]);return e}function x(){for(var t=1,e=1,r=!1,o=0;Math.max(N,j)>o;o++){var i=n.charAt(o);"\n"===i?(r||t++,e=1,r=!1):"\r"===i||"\u2028"===i||"\u2029"===i?(t++,e=1,r=!0):(e++,r=!1)}return{line:t,column:e}}var P={start:o,line:i,LineTerminator:s,comment:u,connection:c,bridge:a,leftlet:l,iip:p,rightlet:f,node:h,component:d,compMeta:m,port:g,anychar:v,_:y,__:b};if(void 0!==e){if(void 0===P[e])throw Error("Invalid rule name: "+t(e)+".")}else e="start";var w,A,E,N=0,_=0,j=0,C=[];w=this,A=w.edges=[],w.exports=[],E={},w.addNode=function(t,n){E[t]||(E[t]={}),n.comp&&(E[t].component=n.comp),n.meta&&(E[t].metadata={routes:n.meta})},w.getResult=function(){return{processes:E,connections:w.processEdges(),exports:w.exports}};var O=function(t,n){for(var e=-1,r=t?t.length:0,o=[];r>++e;){var i=t[e];i instanceof Array?Array.prototype.push.apply(o,n?i:O(i)):o.push(i)}return o};w.registerExports=function(t,n){w.exports.push({"private":t.toLowerCase(),"public":n.toLowerCase()})},w.registerEdges=function(t){t.forEach(function(t){w.edges.push(t)})},w.processEdges=function(){var t,n;return t=O(w.edges),n=[],t.forEach(function(t,e){if(0!==e%2){var r=n[n.length-1];return r.tgt=t.tgt,void 0}n.push(t)}),n};var q=P[e]();if(null===q||N!==n.length){var S=Math.max(N,j),I=n.length>S?n.charAt(S):null,L=x();throw new this.SyntaxError(k(C),I,S,L.line,L.column)}return q},toSource:function(){return this._source}};return n.SyntaxError=function(n,e,r,o,i){function s(n,e){var r,o;switch(n.length){case 0:r="end of input";break;case 1:r=n[0];break;default:r=n.slice(0,n.length-1).join(", ")+" or "+n[n.length-1]}return o=e?t(e):"end of input","Expected "+r+" but "+o+" found."}this.name="SyntaxError",this.expected=n,this.found=e,this.message=s(n,e),this.offset=r,this.line=o,this.column=i},n.SyntaxError.prototype=Error.prototype,n}()}),require.register("noflo/src/lib/Graph.js",function(t,n){var e,r,o={}.hasOwnProperty,i=function(t,n){function e(){this.constructor=t}for(var r in n)o.call(n,r)&&(t[r]=n[r]);return e.prototype=n.prototype,t.prototype=new e,t.__super__=n.prototype,t};e="undefined"!=typeof process&&process.execPath&&-1!==process.execPath.indexOf("node")?n("events").EventEmitter:n("emitter"),r=function(t){function e(t){this.name=null!=t?t:"",this.nodes=[],this.edges=[],this.initializers=[],this.exports=[]}return i(e,t),e.prototype.name="",e.prototype.nodes=[],e.prototype.edges=[],e.prototype.initializers=[],e.prototype.exports=[],e.prototype.addExport=function(t,n){return this.exports.push({"private":t.toLowerCase(),"public":n.toLowerCase()})},e.prototype.addNode=function(t,n,e){var r;return e||(e={}),r={id:t,component:n,metadata:e},this.nodes.push(r),this.emit("addNode",r),r},e.prototype.removeNode=function(t){var n,e,r,o,i,s,u,c,a;for(r=this.getNode(t),c=this.edges,o=0,s=c.length;s>o;o++)n=c[o],n&&(n.from.node===r.id&&this.removeEdge(n.from.node,n.from.port),n.to.node===r.id&&this.removeEdge(n.to.node,n.to.port));for(a=this.initializers,i=0,u=a.length;u>i;i++)e=a[i],e&&e.to.node===r.id&&this.removeEdge(e.to.node,e.to.port);return this.emit("removeNode",r),-1!==this.nodes.indexOf(r)?this.nodes.splice(this.nodes.indexOf(r),1):void 0},e.prototype.getNode=function(t){var n,e,r,o;for(o=this.nodes,e=0,r=o.length;r>e;e++)if(n=o[e],n&&n.id===t)return n;return null},e.prototype.renameNode=function(t,n){var e,r,o,i,s,u,c,a,l;if(o=this.getNode(t)){for(o.id=n,a=this.edges,i=0,u=a.length;u>i;i++)e=a[i],e&&(e.from.node===t&&(e.from.node=n),e.to.node===t&&(e.to.node=n));for(l=this.initializers,s=0,c=l.length;c>s;s++)r=l[s],r&&r.to.node===t&&(r.to.node=n);return this.emit("renameNode",t,n)}},e.prototype.addEdge=function(t,n,e,r,o){var i;return o||(o={}),i={from:{node:t,port:n},to:{node:e,port:r},metadata:o},this.edges.push(i),this.emit("addEdge",i),i},e.prototype.removeEdge=function(t,n,e,r){var o,i,s,u,c,a;for(c=this.edges,a=[],i=s=0,u=c.length;u>s;i=++s)if(o=c[i]){if(o.from.node===t&&o.from.port===n){if(e&&r&&(o.to.node!==e||o.to.port!==r))continue;this.emit("removeEdge",o),this.edges.splice(i,1)}if(o.to.node===t&&o.to.port===n){if(e&&r&&(o.from.node!==e||o.from.port!==r))continue;this.emit("removeEdge",o),a.push(this.edges.splice(i,1))}else a.push(void 0)}return a},e.prototype.addInitial=function(t,n,e,r){var o;return o={from:{data:t},to:{node:n,port:e},metadata:r},this.initializers.push(o),this.emit("addInitial",o),o},e.prototype.removeInitial=function(t,n){var e,r,o,i,s,u;for(s=this.initializers,u=[],r=o=0,i=s.length;i>o;r=++o)e=s[r],e&&(e.to.node===t&&e.to.port===n?(this.emit("removeInitial",e),u.push(this.initializers.splice(r,1))):u.push(void 0));return u},e.prototype.toDOT=function(){var t,n,e,r,o,i,s,u,c,a,l,p,f,h,d,m;for(t=function(t){return t.replace(/\s*/g,"")},n=function(t){return t.replace(/\./g,"")},e="digraph {\n",h=this.nodes,u=0,l=h.length;l>u;u++)s=h[u],e+="    "+t(s.id)+" [label="+s.id+" shape=box]\n";for(d=this.initializers,o=c=0,p=d.length;p>c;o=++c)i=d[o],e+="    data"+o+" [label=\"'"+i.from.data+"'\" shape=plaintext]\n",e+="    data"+o+" -> "+t(i.to.node)+"[headlabel="+n(i.to.port)+" labelfontcolor=blue labelfontsize=8.0]\n";for(m=this.edges,a=0,f=m.length;f>a;a++)r=m[a],e+="    "+t(r.from.node)+" -> "+t(r.to.node)+"[taillabel="+n(r.from.port)+" headlabel="+n(r.to.port)+" labelfontcolor=blue labelfontsize=8.0]\n";return e+="}"},e.prototype.toYUML=function(){var t,n,e,r,o,i,s,u,c;for(e=[],u=this.initializers,r=0,i=u.length;i>r;r++)n=u[r],e.push("(start)["+n.to.port+"]->("+n.to.node+")");for(c=this.edges,o=0,s=c.length;s>o;o++)t=c[o],e.push("("+t.from.node+")["+t.from.port+"]->("+t.to.node+")");return e.join(",")},e.prototype.toJSON=function(){var t,n,e,r,o,i,s,u,c,a,l,p,f,h,d,m,g,v;for(o={properties:{},exports:[],processes:{},connections:[]},this.name&&(o.properties.name=this.name),d=this.exports,s=0,l=d.length;l>s;s++)e=d[s],o.exports.push({"private":e["private"],"public":e["public"]});for(m=this.nodes,u=0,p=m.length;p>u;u++)i=m[u],o.processes[i.id]={component:i.component},i.metadata&&(o.processes[i.id].metadata=i.metadata);for(g=this.edges,c=0,f=g.length;f>c;c++)n=g[c],t={src:{process:n.from.node,port:n.from.port},tgt:{process:n.to.node,port:n.to.port}},Object.keys(n.metadata).length&&(t.metadata=n.metadata),o.connections.push(t);for(v=this.initializers,a=0,h=v.length;h>a;a++)r=v[a],o.connections.push({data:r.from.data,tgt:{process:r.to.node,port:r.to.port}});return o},e.prototype.save=function(t,e){var r;return r=JSON.stringify(this.toJSON(),null,4),n("fs").writeFile(""+t+".json",r,"utf-8",function(n){if(n)throw n;return e(t)})},e}(e),t.Graph=r,t.createGraph=function(t){return new r(t)},t.loadJSON=function(t,n){var e,o,i,s,u,c,a,l,p,f,h,d,m;t.properties||(t.properties={}),t.processes||(t.processes={}),t.connections||(t.connections=[]),s=new r(t.properties.name),h=t.processes;for(u in h)o=h[u],o.metadata||(o.metadata={}),s.addNode(u,o.component,o.metadata);for(d=t.connections,a=0,p=d.length;p>a;a++)e=d[a],void 0===e.data?(c=e.metadata?e.metadata:{},s.addEdge(e.src.process,e.src.port.toLowerCase(),e.tgt.process,e.tgt.port.toLowerCase(),c)):s.addInitial(e.data,e.tgt.process,e.tgt.port.toLowerCase());if(t.exports)for(m=t.exports,l=0,f=m.length;f>l;l++)i=m[l],s.addExport(i["private"],i["public"]);return n(s)},t.loadFBP=function(e,r){var o;return o=n("fbp").parse(e),t.loadJSON(o,r)},t.loadFile=function(e,r){var o,i;{if("undefined"!=typeof process&&process.execPath&&-1!==process.execPath.indexOf("node"))return n("fs").readFile(e,"utf-8",function(n,i){if(n)throw n;return"fbp"===e.split(".").pop()?t.loadFBP(i,r):(o=JSON.parse(i),t.loadJSON(o,r))});try{o=n(e),t.loadJSON(o,r)}catch(s){throw i=s,Error("Failed to load graph "+e+": "+i.message)}}}}),require.register("noflo/src/lib/InternalSocket.js",function(t,n){var e,r,o={}.hasOwnProperty,i=function(t,n){function e(){this.constructor=t}for(var r in n)o.call(n,r)&&(t[r]=n[r]);return e.prototype=n.prototype,t.prototype=new e,t.__super__=n.prototype,t};e="undefined"!=typeof process&&process.execPath&&-1!==process.execPath.indexOf("node")?n("events").EventEmitter:n("emitter"),r=function(t){function n(){this.connected=!1,this.groups=[]}return i(n,t),n.prototype.connect=function(){return this.connected?void 0:(this.connected=!0,this.emit("connect",this))},n.prototype.disconnect=function(){return this.connected?(this.connected=!1,this.emit("disconnect",this)):void 0},n.prototype.isConnected=function(){return this.connected},n.prototype.send=function(t){return this.connected||this.connect(),this.emit("data",t)},n.prototype.beginGroup=function(t){return this.groups.push(t),this.emit("begingroup",t)},n.prototype.endGroup=function(){return this.emit("endgroup",this.groups.pop())},n.prototype.getId=function(){var t,n;return t=function(t){return""+t.process.id+"() "+t.port.toUpperCase()},n=function(t){return""+t.port.toUpperCase()+" "+t.process.id+"()"},this.from||this.to?this.from&&!this.to?""+t(this.from)+" -> ANON":this.from?""+t(this.from)+" -> "+n(this.to):"DATA -> "+n(this.to):"UNDEFINED"},n}(e),t.InternalSocket=r,t.createSocket=function(){return new r}}),require.register("noflo/src/lib/Port.js",function(t,n){var e,r,o={}.hasOwnProperty,i=function(t,n){function e(){this.constructor=t}for(var r in n)o.call(n,r)&&(t[r]=n[r]);return e.prototype=n.prototype,t.prototype=new e,t.__super__=n.prototype,t};e="undefined"!=typeof process&&process.execPath&&-1!==process.execPath.indexOf("node")?n("events").EventEmitter:n("emitter"),r=function(t){function n(t){this.type=t,this.type||(this.type="all"),this.socket=null,this.from=null}return i(n,t),n.prototype.attach=function(t){if(this.isAttached())throw Error(""+this.name+": Socket already attached "+this.socket.getId()+" - "+t.getId());return this.socket=t,this.attachSocket(t)},n.prototype.attachSocket=function(t,n){var e=this;return null==n&&(n=null),this.emit("attach",t),this.from=t.from,t.setMaxListeners&&t.setMaxListeners(0),t.on("connect",function(){return e.emit("connect",t,n)}),t.on("begingroup",function(t){return e.emit("begingroup",t,n)
}),t.on("data",function(t){return e.emit("data",t,n)}),t.on("endgroup",function(t){return e.emit("endgroup",t,n)}),t.on("disconnect",function(){return e.emit("disconnect",t,n)})},n.prototype.connect=function(){if(!this.socket)throw Error("No connection available");return this.socket.connect()},n.prototype.beginGroup=function(t){var n=this;if(!this.socket)throw Error("No connection available");return this.isConnected()?this.socket.beginGroup(t):(this.socket.once("connect",function(){return n.socket.beginGroup(t)}),this.socket.connect())},n.prototype.send=function(t){var n=this;if(!this.socket)throw Error("No connection available");return this.isConnected()?this.socket.send(t):(this.socket.once("connect",function(){return n.socket.send(t)}),this.socket.connect())},n.prototype.endGroup=function(){if(!this.socket)throw Error("No connection available");return this.socket.endGroup()},n.prototype.disconnect=function(){if(!this.socket)throw Error("No connection available");return this.socket.disconnect()},n.prototype.detach=function(t){return this.isAttached(t)?(this.emit("detach",this.socket),this.from=null,this.socket=null):void 0},n.prototype.isConnected=function(){return this.socket?this.socket.isConnected():!1},n.prototype.isAttached=function(){return null!==this.socket},n}(e),t.Port=r}),require.register("noflo/src/lib/ArrayPort.js",function(t,n){var e,r,o={}.hasOwnProperty,i=function(t,n){function e(){this.constructor=t}for(var r in n)o.call(n,r)&&(t[r]=n[r]);return e.prototype=n.prototype,t.prototype=new e,t.__super__=n.prototype,t};r=n("./Port"),e=function(t){function n(t){this.type=t,this.type||(this.type="all"),this.sockets=[]}return i(n,t),n.prototype.attach=function(t){return this.sockets.push(t),this.attachSocket(t,this.sockets.length-1)},n.prototype.connect=function(t){if(null==t&&(t=null),null===t){if(!this.sockets.length)throw Error("No sockets available");return this.sockets.forEach(function(t){return t.connect()}),void 0}if(!this.sockets[t])throw Error("No socket '"+t+"' available");return this.sockets[t].connect()},n.prototype.beginGroup=function(t,n){var e=this;if(null==n&&(n=null),null===n){if(!this.sockets.length)throw Error("No sockets available");return this.sockets.forEach(function(n,r){return e.beginGroup(t,r)}),void 0}if(!this.sockets[n])throw Error("No socket '"+n+"' available");return this.isConnected(n)?this.sockets[n].beginGroup(t):(this.sockets[n].once("connect",function(){return e.sockets[n].beginGroup(t)}),this.sockets[n].connect())},n.prototype.send=function(t,n){var e=this;if(null==n&&(n=null),null===n){if(!this.sockets.length)throw Error("No sockets available");return this.sockets.forEach(function(n,r){return e.send(t,r)}),void 0}if(!this.sockets[n])throw Error("No socket '"+n+"' available");return this.isConnected(n)?this.sockets[n].send(t):(this.sockets[n].once("connect",function(){return e.sockets[n].send(t)}),this.sockets[n].connect())},n.prototype.endGroup=function(t){var n=this;if(null==t&&(t=null),null===t){if(!this.sockets.length)throw Error("No sockets available");return this.sockets.forEach(function(t,e){return n.endGroup(e)}),void 0}if(!this.sockets[t])throw Error("No socket '"+t+"' available");return this.sockets[t].endGroup()},n.prototype.disconnect=function(t){var n,e,r,o;if(null==t&&(t=null),null!==t){if(this.sockets[t])return this.sockets[t].disconnect()}else{if(!this.sockets.length)throw Error("No sockets available");for(o=this.sockets,e=0,r=o.length;r>e;e++)n=o[e],n.disconnect()}},n.prototype.detach=function(t){return-1!==this.sockets.indexOf(t)?(this.sockets.splice(this.sockets.indexOf(t),1),this.emit("detach",t)):void 0},n.prototype.isConnected=function(t){var n;return null==t&&(t=null),null===t?(n=!1,this.sockets.forEach(function(t){return t.isConnected()?n=!0:void 0}),n):this.sockets[t]?this.sockets[t].isConnected():!1},n.prototype.isAttached=function(t){return void 0===t?!1:this.sockets[t]?!0:!1},n}(r.Port),t.ArrayPort=e}),require.register("noflo/src/lib/Component.js",function(t,n){var e,r,o,i={}.hasOwnProperty,s=function(t,n){function e(){this.constructor=t}for(var r in n)i.call(n,r)&&(t[r]=n[r]);return e.prototype=n.prototype,t.prototype=new e,t.__super__=n.prototype,t};r="undefined"!=typeof process&&process.execPath&&-1!==process.execPath.indexOf("node")?n("events").EventEmitter:n("emitter"),e=function(t){function n(){return o=n.__super__.constructor.apply(this,arguments)}return s(n,t),n.prototype.description="",n.prototype.getDescription=function(){return this.description},n.prototype.isReady=function(){return!0},n.prototype.isSubgraph=function(){return!1},n}(r),t.Component=e}),require.register("noflo/src/lib/AsyncComponent.js",function(t,n){var e,r,o,i={}.hasOwnProperty,s=function(t,n){function e(){this.constructor=t}for(var r in n)i.call(n,r)&&(t[r]=n[r]);return e.prototype=n.prototype,t.prototype=new e,t.__super__=n.prototype,t};o=n("./Port"),r=n("./Component"),e=function(t){function n(t,n,e){var r=this;if(this.inPortName=null!=t?t:"in",this.outPortName=null!=n?n:"out",this.errPortName=null!=e?e:"error",!this.inPorts[this.inPortName])throw Error("no inPort named '"+this.inPortName+"'");if(!this.outPorts[this.outPortName])throw Error("no outPort named '"+this.outPortName+"'");this.load=0,this.q=[],this.outPorts.load=new o.Port,this.inPorts[this.inPortName].on("begingroup",function(t){return r.load>0?r.q.push({name:"begingroup",data:t}):r.outPorts[r.outPortName].beginGroup(t)}),this.inPorts[this.inPortName].on("endgroup",function(){return r.load>0?r.q.push({name:"endgroup"}):r.outPorts[r.outPortName].endGroup()}),this.inPorts[this.inPortName].on("disconnect",function(){return r.load>0?r.q.push({name:"disconnect"}):(r.outPorts[r.outPortName].disconnect(),r.outPorts.load.isAttached()?r.outPorts.load.disconnect():void 0)}),this.inPorts[this.inPortName].on("data",function(t){return r.q.length>0?r.q.push({name:"data",data:t}):r.processData(t)})}return s(n,t),n.prototype.processData=function(t){var n=this;return this.incrementLoad(),this.doAsync(t,function(t){if(t){if(!n.outPorts[n.errPortName]||!n.outPorts[n.errPortName].isAttached())throw t;n.outPorts[n.errPortName].send(t),n.outPorts[n.errPortName].disconnect()}return n.decrementLoad()})},n.prototype.incrementLoad=function(){return this.load++,this.outPorts.load.isAttached()&&this.outPorts.load.send(this.load),this.outPorts.load.isAttached()?this.outPorts.load.disconnect():void 0},n.prototype.doAsync=function(t,n){return n(Error("AsyncComponents must implement doAsync"))},n.prototype.decrementLoad=function(){var t=this;if(0===this.load)throw Error("load cannot be negative");return this.load--,this.outPorts.load.isAttached()&&this.outPorts.load.send(this.load),this.outPorts.load.isAttached()&&this.outPorts.load.disconnect(),"undefined"!=typeof process&&process.execPath&&-1!==process.execPath.indexOf("node")?process.nextTick(function(){return t.processQueue()}):setTimeout(function(){return t.processQueue()},0)},n.prototype.processQueue=function(){var t,n;if(!(this.load>0))for(n=!1;this.q.length>0;)switch(t=this.q[0],t.name){case"begingroup":if(n)return;this.outPorts[this.outPortName].beginGroup(t.data),this.q.shift();break;case"endgroup":if(n)return;this.outPorts[this.outPortName].endGroup(),this.q.shift();break;case"disconnect":if(n)return;this.outPorts[this.outPortName].disconnect(),this.outPorts.load.isAttached()&&this.outPorts.load.disconnect(),this.q.shift();break;case"data":this.processData(t.data),this.q.shift(),n=!0}},n}(r.Component),t.AsyncComponent=e}),require.register("noflo/src/lib/LoggingComponent.js",function(t,n){var e,r,o,i=function(t,n){return function(){return t.apply(n,arguments)}},s={}.hasOwnProperty,u=function(t,n){function e(){this.constructor=t}for(var r in n)s.call(n,r)&&(t[r]=n[r]);return e.prototype=n.prototype,t.prototype=new e,t.__super__=n.prototype,t};e=n("./Component").Component,r=n("./Port").Port,o="undefined"!=typeof process&&process.execPath&&-1!==process.execPath.indexOf("node")?n("util"):{inspect:function(t){return t}},t.LoggingComponent=function(t){function n(){this.sendLog=i(this.sendLog,this),this.outPorts={log:new r}}return u(n,t),n.prototype.sendLog=function(t){return"object"==typeof t&&(t.when=new Date,t.source=this.constructor.name,null!=this.nodeId&&(t.nodeID=this.nodeId)),null!=this.outPorts.log&&this.outPorts.log.isAttached()?this.outPorts.log.send(t):console.log(o.inspect(t,4,!0,!0))},n}(e)}),require.register("noflo/src/lib/ComponentLoader.js",function(t,n){var e,r;r=n("./InternalSocket"),e=function(){function t(t){this.baseDir=t,this.components=null,this.checked=[],this.revalidate=!1}return t.prototype.getModulePrefix=function(t){return t?"noflo"===t?"":t.replace("noflo-",""):""},t.prototype.getModuleComponents=function(t){var e,r,o,i,s,u,c,a,l;if(-1===this.checked.indexOf(t)){this.checked.push(t);try{r=n("/"+t+"/component.json")}catch(p){return i=p,void 0}for(o in r.dependencies)this.getModuleComponents(o.replace("/","-"));if(r.noflo){if(u=this.getModulePrefix(r.name),"/"===t[0]&&(t=t.substr(1)),r.noflo.components){c=r.noflo.components;for(s in c)e=c[s],this.registerComponent(u,s,"/"+t+"/"+e)}if(r.noflo.graphs){a=r.noflo.graphs,l=[];for(s in a)e=a[s],l.push(this.registerComponent(u,s,"/"+t+"/"+e));return l}}}},t.prototype.listComponents=function(t){return null!==this.components?t(this.components):(this.components={},this.getModuleComponents(this.baseDir),t(this.components))},t.prototype.load=function(t,e){var r,o,i,s,u=this;if(!this.components)return this.listComponents(function(){return u.load(t,e)}),void 0;if(r=this.components[t],!r){for(o in this.components)if(o.split("/")[1]===t){r=this.components[o];break}if(!r)throw Error("Component "+t+" not available with base "+this.baseDir)}return this.isGraph(r)?("undefined"!=typeof process&&process.execPath&&-1!==process.execPath.indexOf("node")?process.nextTick(function(){return u.loadGraph(t,e)}):setTimeout(function(){return u.loadGraph(t,e)},0),void 0):("function"==typeof r?(i=r,s=new r):(i=n(r),s=i.getComponent()),"Graph"===t&&(s.baseDir=this.baseDir),e(s))},t.prototype.isGraph=function(t){return"string"!=typeof t?!1:-1!==t.indexOf(".fbp")||-1!==t.indexOf(".json")},t.prototype.loadGraph=function(t,e){var o,i,s;return i=n(this.components.Graph),s=r.createSocket(),o=i.getComponent(),o.baseDir=this.baseDir,o.inPorts.graph.attach(s),s.send(this.components[t]),s.disconnect(),delete o.inPorts.graph,delete o.inPorts.start,e(o)},t.prototype.registerComponent=function(t,n,e,r){var o,i;return i=this.getModulePrefix(t),o=""+i+"/"+n,t||(o=n),this.components[o]=e,r?r():void 0},t.prototype.registerGraph=function(t,n,e,r){return this.registerComponent(t,n,e,r)},t.prototype.clear=function(){return this.components=null,this.checked=[],this.revalidate=!0},t}(),t.ComponentLoader=e}),require.register("noflo/src/lib/NoFlo.js",function(t,n){t.graph=n("./Graph"),t.Graph=t.graph.Graph,t.Network=n("./Network").Network,t.isBrowser=function(){return"undefined"!=typeof process&&process.execPath&&-1!==process.execPath.indexOf("node")?!1:!0},t.ComponentLoader=t.isBrowser()?n("./ComponentLoader").ComponentLoader:n("./nodejs/ComponentLoader").ComponentLoader,t.Component=n("./Component").Component,t.AsyncComponent=n("./AsyncComponent").AsyncComponent,t.LoggingComponent=n("./LoggingComponent").LoggingComponent,t.Port=n("./Port").Port,t.ArrayPort=n("./ArrayPort").ArrayPort,t.internalSocket=n("./InternalSocket"),t.createNetwork=function(n,e,r){var o,i;return o=new t.Network(n),i=function(t){return null!=e&&e(t),t.sendInitials()},0===n.nodes.length?(setTimeout(function(){return i(o)},0),o):(o.loader.listComponents(function(){return r?(null!=e&&e(o),void 0):o.connect(function(){return i(o)})}),o)},t.loadFile=function(n,e){return t.graph.loadFile(n,function(n){return t.createNetwork(n,e)})},t.saveFile=function(n,e,r){return t.graph.save(e,function(){return r(e)})}}),require.register("noflo/src/lib/Network.js",function(t,n){var e,r,o,i,s,u,c={}.hasOwnProperty,a=function(t,n){function e(){this.constructor=t}for(var r in n)c.call(n,r)&&(t[r]=n[r]);return e.prototype=n.prototype,t.prototype=new e,t.__super__=n.prototype,t};u=n("underscore"),s=n("./InternalSocket"),i=n("./Graph"),"undefined"!=typeof process&&process.execPath&&-1!==process.execPath.indexOf("node")?(o=n("./nodejs/ComponentLoader"),e=n("events").EventEmitter):(o=n("./ComponentLoader"),e=n("emitter")),r=function(t){function n(t){var n=this;this.processes={},this.connections=[],this.initials=[],this.graph=t,this.baseDir="undefined"!=typeof process&&process.execPath&&-1!==process.execPath.indexOf("node")?t.baseDir||process.cwd():t.baseDir||"/",this.startupDate=new Date,this.handleStartEnd(),this.graph.on("addNode",function(t){return n.addNode(t)}),this.graph.on("removeNode",function(t){return n.removeNode(t)}),this.graph.on("renameNode",function(t,e){return n.renameNode(t,e)}),this.graph.on("addEdge",function(t){return n.addEdge(t)}),this.graph.on("removeEdge",function(t){return n.removeEdge(t)}),this.graph.on("addInitial",function(t){return n.addInitial(t)}),this.graph.on("removeInitial",function(t){return n.removeInitial(t)}),this.loader=new o.ComponentLoader(this.baseDir)}return a(n,t),n.prototype.processes={},n.prototype.connections=[],n.prototype.initials=[],n.prototype.graph=null,n.prototype.startupDate=null,n.prototype.portBuffer={},n.prototype.uptime=function(){return new Date-this.startupDate},n.prototype.handleStartEnd=function(){var t,n,e,r,o=this;return t=0,e=!1,n=!1,r=null,this.on("connect",function(n){return n.socket.from?(r&&clearTimeout(r),0!==t||e||(o.emit("start",{start:o.startupDate}),e=!0),t++):void 0}),this.on("disconnect",function(i){return i.socket.from&&(t--,0>=t)?r=setTimeout(function(){return n?void 0:(o.emit("end",{start:o.startupDate,end:new Date,uptime:o.uptime()}),e=!1,n=!0)},10):void 0})},n.prototype.load=function(t,n){return"object"==typeof t?n(t):this.loader.load(t,n)},n.prototype.addNode=function(t,n){var e,r=this;if(!this.processes[t.id])return e={id:t.id},t.component?this.load(t.component,function(o){return o.nodeId=t.id,e.component=o,o.isSubgraph()&&r.subscribeSubgraph(t.id,o),r.processes[e.id]=e,n?n(e):void 0}):(this.processes[e.id]=e,n&&n(e),void 0)},n.prototype.removeNode=function(t){return this.processes[t.id]?delete this.processes[t.id]:void 0},n.prototype.renameNode=function(t,n){var e;return(e=this.getNode(t))?(e.id=n,this.processes[n]=e,delete this.processes[t]):void 0},n.prototype.getNode=function(t){return this.processes[t]},n.prototype.connect=function(t){var n,e,r,o,i=this;return null==t&&(t=function(){}),o=function(t,n){return function(e){return i["add"+e](n,function(){return t(e)})}},e=u.reduceRight(this.graph.initializers,o,t),n=u.reduceRight(this.graph.edges,o,function(){return e("Initial")}),r=u.reduceRight(this.graph.nodes,o,function(){return n("Edge")}),r("Node")},n.prototype.connectPort=function(t,n,e,r){if(r){if(t.to={process:n,port:e},!n.component.inPorts||!n.component.inPorts[e])throw Error("No inport '"+e+"' defined in process "+n.id+" ("+t.getId()+")");return n.component.inPorts[e].attach(t)}if(t.from={process:n,port:e},!n.component.outPorts||!n.component.outPorts[e])throw Error("No outport '"+e+"' defined in process "+n.id+" ("+t.getId()+")");return n.component.outPorts[e].attach(t)},n.prototype.subscribeSubgraph=function(t,n){var e,r=this;return n.isReady()||n.once("ready",function(){r.subscribeSubgraph(t,n)}),n.network?(e=function(n,e){return e||(e={}),e.subgraph=e.subgraph?""+t+":"+e.subgraph:t,r.emit(n,e)},n.network.on("connect",function(t){return e("connect",t)}),n.network.on("begingroup",function(t){return e("begingroup",t)}),n.network.on("data",function(t){return e("data",t)}),n.network.on("endgroup",function(t){return e("endgroup",t)}),n.network.on("disconnect",function(t){return e("disconnect",t)})):void 0},n.prototype.subscribeSocket=function(t){var n=this;return t.on("connect",function(){return n.emit("connect",{id:t.getId(),socket:t})}),t.on("begingroup",function(e){return n.emit("begingroup",{id:t.getId(),socket:t,group:e})}),t.on("data",function(e){return n.emit("data",{id:t.getId(),socket:t,data:e})}),t.on("endgroup",function(e){return n.emit("endgroup",{id:t.getId(),socket:t,group:e})}),t.on("disconnect",function(){return n.emit("disconnect",{id:t.getId(),socket:t})})},n.prototype.addEdge=function(t,n){var e,r,o,i=this;if(r=s.createSocket(),e=this.getNode(t.from.node),!e)throw Error("No process defined for outbound node "+t.from.node);if(!e.component)throw Error("No component defined for outbound node "+t.from.node);if(!e.component.isReady())return e.component.once("ready",function(){return i.addEdge(t,n)}),void 0;if(o=this.getNode(t.to.node),!o)throw Error("No process defined for inbound node "+t.to.node);if(!o.component)throw Error("No component defined for inbound node "+t.to.node);return o.component.isReady()?(this.connectPort(r,o,t.to.port,!0),this.connectPort(r,e,t.from.port,!1),this.subscribeSocket(r),this.connections.push(r),n?n():void 0):(o.component.once("ready",function(){return i.addEdge(t,n)}),void 0)},n.prototype.removeEdge=function(t){var n,e,r,o,i;for(o=this.connections,i=[],e=0,r=o.length;r>e;e++)n=o[e],n&&t.to.node===n.to.process.id&&t.to.port===n.to.port&&(n.to.process.component.inPorts[n.to.port].detach(n),t.from.node&&n.from&&t.from.node===n.from.process.id&&t.from.port===n.from.port&&n.from.process.component.outPorts[n.from.port].detach(n),i.push(this.connections.splice(this.connections.indexOf(n),1)));return i},n.prototype.addInitial=function(t,n){var e,r,o=this;if(e=s.createSocket(),this.subscribeSocket(e),r=this.getNode(t.to.node),!r)throw Error("No process defined for inbound node "+t.to.node);return r.component.isReady()||r.component.inPorts[t.to.port]?(this.connectPort(e,r,t.to.port,!0),this.connections.push(e),this.initials.push({socket:e,data:t.from.data}),n?n():void 0):(r.component.setMaxListeners(0),r.component.once("ready",function(){return o.addInitial(t,n)}),void 0)},n.prototype.removeInitial=function(t){var n,e,r,o,i;for(o=this.connections,i=[],e=0,r=o.length;r>e;e++)n=o[e],n&&t.to.node===n.to.process.id&&t.to.port===n.to.port&&(n.to.process.component.inPorts[n.to.port].detach(n),i.push(this.connections.splice(this.connections.indexOf(n),1)));return i},n.prototype.sendInitial=function(t){return t.socket.connect(),t.socket.send(t.data),t.socket.disconnect()},n.prototype.sendInitials=function(){var t,n=this;return t=function(){var t,e,r,o;for(o=n.initials,e=0,r=o.length;r>e;e++)t=o[e],n.sendInitial(t);return n.initials=[]},"undefined"!=typeof process&&process.execPath&&-1!==process.execPath.indexOf("node")?process.nextTick(t):setTimeout(t,0)},n}(e),t.Network=r}),require.register("noflo/src/components/Graph.js",function(t,n){var e,r,o={}.hasOwnProperty,i=function(t,n){function e(){this.constructor=t}for(var r in n)o.call(n,r)&&(t[r]=n[r]);return e.prototype=n.prototype,t.prototype=new e,t.__super__=n.prototype,t};r="undefined"!=typeof process&&process.execPath&&-1!==process.execPath.indexOf("node")?n("../../lib/NoFlo"):n("../lib/NoFlo"),e=function(t){function n(){var t=this;this.network=null,this.ready=!0,this.started=!1,this.baseDir=null,this.inPorts={graph:new r.Port("all"),start:new r.Port("bang")},this.outPorts={},this.inPorts.graph.on("data",function(n){return t.setGraph(n)}),this.inPorts.start.on("data",function(){return t.started=!0,t.network?t.network.connect(function(){var n,e,r,o;t.network.sendInitials(),e=!1,o=t.network.processes;for(n in o)r=o[n],t.checkComponent(n,r)||(e=!0);return e?void 0:t.setToReady()}):void 0})}return i(n,t),n.prototype.setGraph=function(t){var n=this;return this.ready=!1,"object"==typeof t?"function"==typeof t.addNode?this.createNetwork(t):(r.graph.loadJSON(t,function(t){return t.baseDir=n.baseDir,n.createNetwork(t)}),void 0):("/"!==t.substr(0,1)&&(t=""+process.cwd()+"/"+t),t=r.graph.loadFile(t,function(t){return t.baseDir=n.baseDir,n.createNetwork(t)}))},n.prototype.createNetwork=function(t){var n,e=this;return(null!=(n=this.inPorts.start)?n.isAttached():void 0)&&!this.started?(r.createNetwork(t,function(t){return e.network=t,e.emit("network",e.network)},!0),void 0):r.createNetwork(t,function(t){var n,r,o,i;e.network=t,e.emit("network",e.network),r=!1,i=e.network.processes;for(n in i)o=i[n],e.checkComponent(n,o)||(r=!0);return r?void 0:e.setToReady()})},n.prototype.checkComponent=function(t,n){var e=this;return n.component.isReady()?(this.findEdgePorts(t,n),!0):(n.component.once("ready",function(){return e.checkComponent(t,n),e.setToReady()}),!1)},n.prototype.portName=function(t,n){return""+t.toLowerCase()+"."+n},n.prototype.isExported=function(t,n,e){var r,o,i,s,u;if(o=this.portName(n,e),t.isAttached())return!1;if(0===this.network.graph.exports.length)return o;for(u=this.network.graph.exports,i=0,s=u.length;s>i;i++)if(r=u[i],r["private"]===o)return r["public"];return!1},n.prototype.setToReady=function(){var t=this;return"undefined"!=typeof process&&process.execPath&&-1!==process.execPath.indexOf("node")?process.nextTick(function(){return t.ready=!0,t.emit("ready")}):setTimeout(function(){return t.ready=!0,t.emit("ready")},0)},n.prototype.findEdgePorts=function(t,n){var e,r,o,i,s;i=n.component.inPorts;for(r in i)e=i[r],o=this.isExported(e,t,r),o!==!1&&(this.inPorts[o]=e);s=n.component.outPorts;for(r in s)e=s[r],o=this.isExported(e,t,r),o!==!1&&(this.outPorts[o]=e);return!0},n.prototype.isReady=function(){return this.ready},n.prototype.isSubgraph=function(){return!0},n}(r.Component),t.getComponent=function(){return new e}}),require.register("noflo/component.json",function(t,n,e){e.exports=JSON.parse('{"name":"noflo","description":"Flow-Based Programming environment for JavaScript","keywords":["fbp","workflow","flow"],"repo":"noflo/noflo","version":"0.4.0","dependencies":{"component/emitter":"*","component/underscore":"*","noflo/fbp":"*"},"development":{},"license":"MIT","main":"src/lib/NoFlo.js","scripts":["src/lib/Graph.js","src/lib/InternalSocket.js","src/lib/Port.js","src/lib/ArrayPort.js","src/lib/Component.js","src/lib/AsyncComponent.js","src/lib/LoggingComponent.js","src/lib/ComponentLoader.js","src/lib/NoFlo.js","src/lib/Network.js","src/components/Graph.js"],"json":["component.json"],"noflo":{"components":{"Graph":"src/components/Graph.js"}}}')}),require.alias("component-emitter/index.js","noflo/deps/emitter/index.js"),require.alias("component-emitter/index.js","emitter/index.js"),require.alias("component-indexof/index.js","component-emitter/deps/indexof/index.js"),require.alias("component-underscore/index.js","noflo/deps/underscore/index.js"),require.alias("component-underscore/index.js","underscore/index.js"),require.alias("noflo-fbp/lib/fbp.js","noflo/deps/fbp/lib/fbp.js"),require.alias("noflo-fbp/lib/fbp.js","noflo/deps/fbp/index.js"),require.alias("noflo-fbp/lib/fbp.js","fbp/index.js"),require.alias("noflo-fbp/lib/fbp.js","noflo-fbp/index.js"),require.alias("noflo/src/lib/NoFlo.js","noflo/index.js");